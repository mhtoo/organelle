{"version":3,"sources":["context/UserContext.js","components/auth/AuthOptions.js","components/pages/Routes.js","components/layout/Header.js","components/pages/Home.js","components/pages/Todo.js","components/pages/Calendar.js","components/misc/ErrorNotice.js","components/auth/Login.js","components/auth/Register.js","App.js","index.js"],"names":["createContext","AuthOptions","useContext","UserContext","userData","setUserData","history","useHistory","className","user","onClick","token","undefined","localStorage","setItem","push","Header","id","to","Home","Todo","Calendar","ErrorNotice","props","message","clearError","Login","useState","email","setEmail","password","setPassword","error","setError","submit","e","a","preventDefault","loginUser","Axios","post","loginRes","console","log","process","data","response","msg","onSubmit","htmlFor","type","onChange","target","value","Register","passwordCheck","setPasswordCheck","displayName","setDisplayName","newUser","loginURL","placeholder","App","useEffect","getItem","header","get","headers","userRes","checkLoggedIn","Provider","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fc3455b1.chunk.js","sourcesContent":["import {createContext} from 'react';\n\nexport default createContext (null);","import React, {useContext} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport UserContext from '../../context/UserContext';\n\nexport default function AuthOptions() {\n    const {userData, setUserData} = useContext(UserContext);\n    const history = useHistory();\n\n    const redirectRegister = () => history.push('/register');\n    const redirectLogin = () => history.push('/login');\n    const redirectLogout = () => {\n        setUserData({\n            token: undefined,\n            user: undefined\n        });\n        localStorage.setItem('auth-token', \"\");\n    };\n    return (\n        <nav className='auth-options'>\n            {\n                userData.user ? (<button onClick={redirectLogout}> Log out</button>) : (\n                    <>\n                        <button onClick={redirectRegister}> Register </button>\n                        <button onClick={redirectLogin}> LogIn </button>\n                    </>\n                )\n            }\n        </nav>\n    );\n}","import React, {useContext} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport UserContext from '../../context/UserContext';\n\nexport default function AuthOptions() {\n    const {userData, setUserData} = useContext(UserContext);\n    const history = useHistory();\n\n    const reidrectCalendar = () => history.push('/calendar');\n    const redirectTodo = () => history.push('/todo');\n    return (\n        <nav className=\"routes\">\n            {\n                !userData.user ? (<></>) : (\n                    <>\n                        <button onClick={reidrectCalendar}> Calendar </button>\n                        <button onClick={redirectTodo}> Todo </button>\n                    </>\n                )\n            }\n        </nav>\n    );\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport AuthOptions from \"../auth/AuthOptions\";\nimport Routes from \"../pages/Routes\";\n\nexport default function Header() {\n  return (\n    <header id=\"header\">\n      <Link to=\"/\">\n        <h1 className=\"title\">Organelle</h1>\n      </Link>\n      <Routes />\n      <AuthOptions />\n    </header>\n  );\n}","import React from 'react';\n\nexport default function Home() {\nreturn <div>Home</div>;\n}","import React from 'react';\n\nexport default function Todo() {\n    return <div>Todo</div>;\n}\n","import React from 'react';\n\nexport default function Calendar() {\n    return <div>Calendar</div>;\n}","import React from \"react\";\n\nexport default function ErrorNotice(props) {\n  return (\n    <div className=\"error-notice\">\n      <span>{props.message}</span>\n      <button onClick={props.clearError}>X</button>\n    </div>\n  );\n}","import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../../context/UserContext\";\nimport Axios from \"axios\";\nimport ErrorNotice from \"../misc/ErrorNotice\";\n\nexport default function Login() {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n\n  const { setUserData } = useContext(UserContext);\n  const history = useHistory();\n\n  const submit = async (e) => {\n    e.preventDefault();\n    try {\n      const loginUser = { email, password };\n      const loginURL = process.env.NODE_ENV === \"production\"?\n        \"http://organelle.pzny.xyz/users/login\":\n        \"http://localhost:8080/users/login\";\n      const loginRes = await Axios.post(loginURL, loginUser);\n      console.log(process.env.NODE_ENV);\n      setUserData({\n        token: loginRes.data.token,\n        user: loginRes.data.user,\n      });\n      localStorage.setItem(\"auth-token\", loginRes.data.token);\n      history.push(\"/\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n  return (\n    <div className=\"page\">\n      <h2>Log in</h2>\n      {error && (\n        <ErrorNotice message={error} clearError={() => setError(undefined)} />\n      )}\n      <form className=\"form\" onSubmit={submit}>\n        <label htmlFor=\"login-email\">Email</label>\n        <input\n          id=\"login-email\"\n          type=\"email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n\n        <label htmlFor=\"login-password\">Password</label>\n        <input\n          id=\"login-password\"\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n\n        <input type=\"submit\" value=\"Log in\" />\n      </form>\n    </div>\n  );\n}","import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../../context/UserContext\";\nimport Axios from \"axios\";\nimport ErrorNotice from \"../misc/ErrorNotice\";\n\nexport default function Register() {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [passwordCheck, setPasswordCheck] = useState();\n  const [displayName, setDisplayName] = useState();\n  const [error, setError] = useState();\n\n  const { setUserData } = useContext(UserContext);\n  const history = useHistory();\n\n  const submit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const newUser = { email, password, passwordCheck, displayName };\n      const registerURL = process.env.NODE_ENV === \"production\"?\n        \"http://organelle.pzny.xyz/users/register\":\n        \"http://localhost:8080/users/register\";\n      const loginURL = process.env.NODE_ENV === \"production\"?\n        \"http://organelle.pzny.xyz/users/login\":\n        \"http://localhost:8080/users/login\";\n      await Axios.post(registerURL, newUser);\n      const loginRes = await Axios.post(loginURL, {\n        email,\n        password,\n      });\n      setUserData({\n        token: loginRes.data.token,\n        user: loginRes.data.user,\n      });\n      localStorage.setItem(\"auth-token\", loginRes.data.token);\n      history.push(\"/\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return (\n    <div className=\"page\">\n      <h2>Register</h2>\n      {error && (\n        <ErrorNotice message={error} clearError={() => setError(undefined)} />\n      )}\n      <form className=\"form\" onSubmit={submit}>\n        <label htmlFor=\"register-email\">Email</label>\n        <input\n          id=\"register-email\"\n          type=\"email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n\n        <label htmlFor=\"register-password\">Password</label>\n        <input\n          id=\"register-password\"\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Verify password\"\n          onChange={(e) => setPasswordCheck(e.target.value)}\n        />\n\n        <label htmlFor=\"register-display-name\">Display name</label>\n        <input\n          id=\"register-display-name\"\n          type=\"text\"\n          onChange={(e) => setDisplayName(e.target.value)}\n        />\n\n        <input type=\"submit\" value=\"Register\" />\n      </form>\n    </div>\n  );\n}","import React, {useState, useEffect} from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport Header from './components/layout/Header';\nimport Home from \"./components/pages/Home\";\nimport Todo from \"./components/pages/Todo\";\nimport Calendar from \"./components/pages/Calendar\";\nimport Login from \"./components/auth/Login\";\nimport Register from \"./components/auth/Register\";\nimport UserContext from  \"./context/UserContext\";\nimport Axios from \"axios\";\nimport \"./style.css\";\n\nexport default function App() {\n\n  const [userData, setUserData] = useState({\n    token: undefined,\n    user: undefined,\n  });\n\n  useEffect( () => {\n    const checkLoggedIn = async () => {\n      let token = localStorage.getItem(\"auth-token\");\n      if (token === null) {\n        localStorage.setItem(\"auth-token\", \"\");\n        token = \"\";\n      }\n\n      const tivURL = process.env.NODE_ENV === \"production\" ?\n        \"http://organelle.pzny.xyz/users/tokenIsValid\":\n        \"http://localhost:8080/users/tokenIsValid\";\n\n      const tokenRes = await Axios.post(tivURL, null, {header: {\"x-auth-token\": token}});\n\n      if (tokenRes.data) {\n        const userRes = await Axios.get(\"http://localhost:8080/users\",\n          {headers: {\"x-auth-token\": token}}\n        );\n        setUserData({\n          token,\n          user: userRes.data,\n        });\n      }\n    }\n    checkLoggedIn();\n  }, [])\n\n  return (\n    <>\n      <BrowserRouter>\n        <UserContext.Provider value={{userData, setUserData}}>\n          <Header />\n          <div className=\"container\">\n            <Switch>\n              <Route exact path='/' component={Home} />\n              <Route path='/login' component={Login} />\n              <Route path='/register' component={Register} />\n              <Route path='/todo' component={Todo} />\n              <Route path='/calendar' component={Calendar} />\n            </Switch>\n          </div>\n        </ UserContext.Provider>\n      </BrowserRouter>\n    </>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}