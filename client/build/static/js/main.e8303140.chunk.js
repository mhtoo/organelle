(this.webpackJsonporganelle=this.webpackJsonporganelle||[]).push([[0],{58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n(28),c=n.n(s),o=n(9),i=n.n(o),u=n(13),l=n(7),j=n(10),b=n(2),d=Object(a.createContext)(null);function h(){var e=Object(a.useContext)(d),t=e.userData,n=e.setUserData,s=Object(b.f)();return Object(r.jsx)("nav",{className:"auth-options",children:t.user?Object(r.jsx)("button",{onClick:function(){n({token:void 0,user:void 0}),localStorage.setItem("auth-token","")},children:" Log out"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){return s.push("/register")},children:" Register "}),Object(r.jsx)("button",{onClick:function(){return s.push("/login")},children:" LogIn "})]})})}function p(){var e=Object(a.useContext)(d),t=e.userData,n=(e.setUserData,Object(b.f)());return Object(r.jsx)("nav",{className:"routes",children:t.user?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){return n.push("/calendar")},children:" Calendar "}),Object(r.jsx)("button",{onClick:function(){return n.push("/todo")},children:" Todo "})]}):Object(r.jsx)(r.Fragment,{})})}function O(){return Object(r.jsxs)("header",{id:"header",children:[Object(r.jsx)(j.b,{to:"/",children:Object(r.jsx)("h1",{className:"title",children:"Organelle"})}),Object(r.jsx)(p,{}),Object(r.jsx)(h,{})]})}function x(){return Object(r.jsx)("div",{children:"Home"})}function m(){return Object(r.jsx)("div",{children:"Todo"})}function g(){return Object(r.jsx)("div",{children:"Calendar"})}var f=n(11),v=n.n(f);function k(e){return Object(r.jsxs)("div",{className:"error-notice",children:[Object(r.jsx)("span",{children:e.message}),Object(r.jsx)("button",{onClick:e.clearError,children:"X"})]})}function w(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(),o=Object(l.a)(c,2),j=o[0],h=o[1],p=Object(a.useState)(),O=Object(l.a)(p,2),x=O[0],m=O[1],g=Object(a.useContext)(d).setUserData,f=Object(b.f)(),w=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r={email:n,password:j},e.next=5,v.a.post("http://localhost:8080/users/login",r);case 5:a=e.sent,g({token:a.data.token,user:a.data.user}),localStorage.setItem("auth-token",a.data.token),f.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&m(e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"page",children:[Object(r.jsx)("h2",{children:"Log in"}),x&&Object(r.jsx)(k,{message:x,clearError:function(){return m(void 0)}}),Object(r.jsxs)("form",{className:"form",onSubmit:w,children:[Object(r.jsx)("label",{htmlFor:"login-email",children:"Email"}),Object(r.jsx)("input",{id:"login-email",type:"email",onChange:function(e){return s(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"login-password",children:"Password"}),Object(r.jsx)("input",{id:"login-password",type:"password",onChange:function(e){return h(e.target.value)}}),Object(r.jsx)("input",{type:"submit",value:"Log in"})]})]})}function C(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(),o=Object(l.a)(c,2),j=o[0],h=o[1],p=Object(a.useState)(),O=Object(l.a)(p,2),x=O[0],m=O[1],g=Object(a.useState)(),f=Object(l.a)(g,2),w=f[0],C=f[1],y=Object(a.useState)(),S=Object(l.a)(y,2),D=S[0],N=S[1],F=Object(a.useContext)(d).setUserData,I=Object(b.f)(),E=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r={email:n,password:j,passwordCheck:x,displayName:w},e.next=5,v.a.post("http://localhost:8080/users/register",r);case 5:return e.next=7,v.a.post("http://localhost:8080/users/login",{email:n,password:j});case 7:a=e.sent,F({token:a.data.token,user:a.data.user}),localStorage.setItem("auth-token",a.data.token),I.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response.data.msg&&N(e.t0.response.data.msg);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"page",children:[Object(r.jsx)("h2",{children:"Register"}),D&&Object(r.jsx)(k,{message:D,clearError:function(){return N(void 0)}}),Object(r.jsxs)("form",{className:"form",onSubmit:E,children:[Object(r.jsx)("label",{htmlFor:"register-email",children:"Email"}),Object(r.jsx)("input",{id:"register-email",type:"email",onChange:function(e){return s(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"register-password",children:"Password"}),Object(r.jsx)("input",{id:"register-password",type:"password",onChange:function(e){return h(e.target.value)}}),Object(r.jsx)("input",{type:"password",placeholder:"Verify password",onChange:function(e){return m(e.target.value)}}),Object(r.jsx)("label",{htmlFor:"register-display-name",children:"Display name"}),Object(r.jsx)("input",{id:"register-display-name",type:"text",onChange:function(e){return C(e.target.value)}}),Object(r.jsx)("input",{type:"submit",value:"Register"})]})]})}n(58);function y(){var e=Object(a.useState)({token:void 0,user:void 0}),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,v.a.post("http://localhost:8080/users/tokenIsValid",null,{header:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,v.a.get("http://localhost:8080/users",{headers:{"x-auth-token":t}});case 8:n=e.sent,s({token:t,user:n.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(j.a,{children:Object(r.jsxs)(d.Provider,{value:{userData:n,setUserData:s},children:[Object(r.jsx)(O,{}),Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)(b.c,{children:[Object(r.jsx)(b.a,{exact:!0,path:"/",component:x}),Object(r.jsx)(b.a,{path:"/login",component:w}),Object(r.jsx)(b.a,{path:"/register",component:C}),Object(r.jsx)(b.a,{path:"/todo",component:m}),Object(r.jsx)(b.a,{path:"/calendar",component:g})]})})]})})})}c.a.render(Object(r.jsx)(y,{}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.e8303140.chunk.js.map