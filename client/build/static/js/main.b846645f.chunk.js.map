{"version":3,"sources":["context/UserContext.js","components/auth/AuthOptions.js","components/pages/Routes.js","components/layout/Header.js","components/pages/Home.js","components/pages/Todo.js","components/pages/Calendar.js","components/misc/ErrorNotice.js","components/auth/Login.js","components/auth/Register.js","auth/PrivateRoute.js","App.js","index.js"],"names":["createContext","AuthOptions","useContext","UserContext","userData","setUserData","history","useHistory","className","user","onClick","token","undefined","localStorage","setItem","push","Routes","Header","id","to","Home","Todo","Calendar","ErrorNotice","props","message","clearError","Login","useState","email","setEmail","password","setPassword","error","setError","submit","e","a","preventDefault","loginUser","Axios","post","loginRes","data","response","msg","onSubmit","htmlFor","type","onChange","target","value","Register","passwordCheck","setPasswordCheck","displayName","setDisplayName","newUser","loginURL","placeholder","PrivateRoute","Component","component","rest","render","App","useEffect","getItem","header","get","headers","userRes","checkLoggedIn","Provider","exact","path","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b846645f.chunk.js","sourcesContent":["import {createContext} from 'react';\n\nexport default createContext (null);","import React, {useContext} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport UserContext from '../../context/UserContext';\n\nexport default function AuthOptions() {\n    const {userData, setUserData} = useContext(UserContext);\n    const history = useHistory();\n\n    const redirectRegister = () => history.push('/register');\n    const redirectLogin = () => history.push('/login');\n    const redirectLogout = () => {\n        setUserData({\n            token: undefined,\n            user: undefined\n        });\n        localStorage.setItem('auth-token', \"\");\n    };\n    return (\n        <nav className='auth-options'>\n            {\n                userData.user ? (<button onClick={redirectLogout}> Log out</button>) : (\n                    <>\n                        <button onClick={redirectRegister}> Register </button>\n                        <button onClick={redirectLogin}> LogIn </button>\n                    </>\n                )\n            }\n        </nav>\n    );\n}","import React, {useContext} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport UserContext from '../../context/UserContext';\n\nexport default function Routes() {\n    const {userData, setUserData} = useContext(UserContext);\n    const history = useHistory();\n\n    const reidrectCalendar = () => history.push('/calendar');\n    const redirectTodo = () => history.push('/todo');\n    return (\n        <nav className=\"routes\">\n            {\n                !userData.user ? (<></>) : (\n                    <>\n                        <button onClick={reidrectCalendar}> Calendar </button>\n                        <button onClick={redirectTodo}> Todo </button>\n                    </>\n                )\n            }\n        </nav>\n    );\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport AuthOptions from \"../auth/AuthOptions\";\nimport Routes from \"../pages/Routes\";\n\nexport default function Header() {\n  return (\n    <header id=\"header\">\n      <Link to=\"/\">\n        <h1 className=\"title\">Organelle</h1>\n      </Link>\n      <Routes />\n      <AuthOptions />\n    </header>\n  );\n}","import React from 'react';\n\nexport default function Home() {\nreturn <div>Home</div>;\n}","import React from 'react';\n\nexport default function Todo() {\n    return <div>Todo</div>;\n}\n","import React from 'react';\n\nexport default function Calendar() {\n    return <div>Calendar</div>;\n}","import React from \"react\";\n\nexport default function ErrorNotice(props) {\n  return (\n    <div className=\"error-notice\">\n      <span>{props.message}</span>\n      <button onClick={props.clearError}>X</button>\n    </div>\n  );\n}","import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../../context/UserContext\";\nimport Axios from \"axios\";\nimport ErrorNotice from \"../misc/ErrorNotice\";\n\nexport default function Login() {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState();\n\n  const { setUserData } = useContext(UserContext);\n  const history = useHistory();\n\n  const submit = async (e) => {\n    e.preventDefault();\n    try {\n      const loginUser = { email, password };\n      const loginURL = process.env.NODE_ENV === \"production\"?\n        \"http://organelle.pzny.xyz/users/login\":\n        \"http://localhost:8080/users/login\";\n      const loginRes = await Axios.post(loginURL, loginUser);\n      setUserData({\n        token: loginRes.data.token,\n        user: loginRes.data.user,\n      });\n      localStorage.setItem(\"auth-token\", loginRes.data.token);\n      history.push(\"/\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n  return (\n    <div className=\"page\">\n      <h2>Log in</h2>\n      {error && (\n        <ErrorNotice message={error} clearError={() => setError(undefined)} />\n      )}\n      <form className=\"form\" onSubmit={submit}>\n        <label htmlFor=\"login-email\">Email</label>\n        <input\n          id=\"login-email\"\n          type=\"email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n\n        <label htmlFor=\"login-password\">Password</label>\n        <input\n          id=\"login-password\"\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n\n        <input type=\"submit\" value=\"Log in\" />\n      </form>\n    </div>\n  );\n}","import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../../context/UserContext\";\nimport Axios from \"axios\";\nimport ErrorNotice from \"../misc/ErrorNotice\";\n\nexport default function Register() {\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [passwordCheck, setPasswordCheck] = useState();\n  const [displayName, setDisplayName] = useState();\n  const [error, setError] = useState();\n\n  const { setUserData } = useContext(UserContext);\n  const history = useHistory();\n\n  const submit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const newUser = { email, password, passwordCheck, displayName };\n      const registerURL = process.env.NODE_ENV === \"production\"?\n        \"http://organelle.pzny.xyz/users/register\":\n        \"http://localhost:8080/users/register\";\n      const loginURL = process.env.NODE_ENV === \"production\"?\n        \"http://organelle.pzny.xyz/users/login\":\n        \"http://localhost:8080/users/login\";\n      await Axios.post(registerURL, newUser);\n      const loginRes = await Axios.post(loginURL, {\n        email,\n        password,\n      });\n      setUserData({\n        token: loginRes.data.token,\n        user: loginRes.data.user,\n      });\n      localStorage.setItem(\"auth-token\", loginRes.data.token);\n      history.push(\"/\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return (\n    <div className=\"page\">\n      <h2>Register</h2>\n      {error && (\n        <ErrorNotice message={error} clearError={() => setError(undefined)} />\n      )}\n      <form className=\"form\" onSubmit={submit}>\n        <label htmlFor=\"register-email\">Email</label>\n        <input\n          id=\"register-email\"\n          type=\"email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n\n        <label htmlFor=\"register-password\">Password</label>\n        <input\n          id=\"register-password\"\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Verify password\"\n          onChange={(e) => setPasswordCheck(e.target.value)}\n        />\n\n        <label htmlFor=\"register-display-name\">Display name</label>\n        <input\n          id=\"register-display-name\"\n          type=\"text\"\n          onChange={(e) => setDisplayName(e.target.value)}\n        />\n\n        <input type=\"submit\" value=\"Register\" />\n      </form>\n    </div>\n  );\n}","import React, {useContext} from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport UserContext from '../context/UserContext';\n\nconst PrivateRoute = ({component: Component, ...rest}) => {\n    const {userData, setUserData} = useContext(UserContext);\n    return (\n\n        // Show the component only when the user is logged in\n        // Otherwise, redirect the user to /signin page\n        <Route {...rest} render={props => (\n            userData.user ?\n                <Component {...props} />\n            : <Redirect to=\"/login\" />\n        )} />\n    );\n};\n\nexport default PrivateRoute;","import React, {useState, useEffect} from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport Header from './components/layout/Header';\nimport Home from \"./components/pages/Home\";\nimport Todo from \"./components/pages/Todo\";\nimport Calendar from \"./components/pages/Calendar\";\nimport Login from \"./components/auth/Login\";\nimport Register from \"./components/auth/Register\";\nimport UserContext from  \"./context/UserContext\";\nimport PrivateRoute from \"./auth/PrivateRoute\";\nimport Axios from \"axios\";\nimport \"./style.css\";\n\nexport default function App() {\n\n  const [userData, setUserData] = useState({\n    token: undefined,\n    user: undefined,\n  });\n\n  useEffect( () => {\n    const checkLoggedIn = async () => {\n      let token = localStorage.getItem(\"auth-token\");\n      if (token === null) {\n        localStorage.setItem(\"auth-token\", \"\");\n        token = \"\";\n      }\n\n      const tivURL = process.env.NODE_ENV === \"production\" ?\n        \"http://organelle.pzny.xyz/users/tokenIsValid\":\n        \"http://localhost:8080/users/tokenIsValid\";\n\n      const tokenRes = await Axios.post(tivURL, null, {header: {\"x-auth-token\": token}});\n\n      if (tokenRes.data) {\n        const userRes = await Axios.get(\"http://localhost:8080/users\",\n          {headers: {\"x-auth-token\": token}}\n        );\n        setUserData({\n          token,\n          user: userRes.data,\n        });\n      }\n    }\n    checkLoggedIn();\n  }, [])\n\n  return (\n    <>\n      <BrowserRouter>\n        <UserContext.Provider value={{userData, setUserData}}>\n          <Header />\n          <div className=\"container\">\n            <Switch>\n              <Route exact path='/' component={Home} />\n              <Route path='/login' component={Login} />\n              <Route path='/register' component={Register} />\n              <PrivateRoute path='/todo' component={Todo} />\n              <PrivateRoute path='/calendar' component={Calendar} />\n            </Switch>\n          </div>\n        </ UserContext.Provider>\n      </BrowserRouter>\n    </>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}